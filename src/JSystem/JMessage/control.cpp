//
// Generated by dtk
// Translation Unit: control.cpp
//

#include "JSystem/JMessage/control.h"
#include "dolphin/types.h"

/* 8029E930-8029E970       .text __ct__Q28JMessage8TControlFv */
JMessage::TControl::TControl()
    : mResourceContainer(NULL)
    , mResource(NULL)
    , mBaseProcSeq(NULL)
    , mBaseProcRender(NULL)
    , mMessageCode(0)
    , mMessageIndex(0)
    , mResourceCache(NULL)
    , mMessageBegin(NULL)
    , _20(NULL)
    , mCurrentText(NULL)
{
    /* Nonmatching */
}

/* 8029E970-8029E9B8       .text __dt__Q28JMessage8TControlFv */
JMessage::TControl::~TControl() {}

/* 8029E9B8-8029EA34       .text getResource_groupID__Q28JMessage8TControlCFUs */
void JMessage::TControl::getResource_groupID(u16) const {
    /* Nonmatching */
}

/* 8029EA34-8029EAC8       .text getMessageData__Q28JMessage8TControlCFUsUs */
void JMessage::TControl::getMessageData(u16, u16) const {
    /* Nonmatching */
}

/* 8029EAC8-8029EB1C       .text reset__Q28JMessage8TControlFv */
void JMessage::TControl::reset() {
    reset_();

    if (mBaseProcSeq) {
        mBaseProcSeq->reset_(NULL);
    }

    if (mBaseProcRender) {
        mBaseProcRender->reset_(NULL);
    }
}

/* 8029EB1C-8029EC00       .text update__Q28JMessage8TControlFv */
bool JMessage::TControl::update() {
    if (!isReady_update_()) {
        return false;
    }

    if (mCurrentText == NULL) {
        mCurrentText = mMessageBegin;
        mBaseProcSeq->setBegin(mResourceCache, mMessageBegin);
    }

    mCurrentText = mBaseProcSeq->process(NULL);

    if (!mCurrentText) {
        mMessageBegin = NULL;
        return false;
    }

    return true;
}

/* 8029EC00-8029ECCC       .text render__Q28JMessage8TControlFv */
void JMessage::TControl::render() {
    /* Nonmatching */
    if (!isReady_render_()) {
        return;
    }

    mBaseProcRender->setBegin(mResourceCache, _20);
    mBaseProcRender->field_0x0C = mEntry;
    mBaseProcRender->mStack = mRenderStack;
    mBaseProcRender->process(mCurrentText);
}

/* 8029ECCC-8029ECD4       .text do_word__Q28JMessage8TControlFUl */
bool JMessage::TControl::do_word(u32) {
    return false;
}

/* 8029ECD4-8029ED88       .text setMessageCode_flush___Q28JMessage8TControlFv */
bool JMessage::TControl::setMessageCode_flush_() {
    /* Nonmatching */
}

/* 8029ED88-8029EDA4       .text reset___Q28JMessage8TControlFv */
void JMessage::TControl::reset_() {
    mResourceCache = NULL;
    mMessageBegin = NULL;
    _20 = NULL;
    mCurrentText = NULL;
    mRenderStack.clear();
}
