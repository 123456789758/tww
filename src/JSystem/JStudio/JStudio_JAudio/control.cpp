//
// Generated by dtk
// Translation Unit: control.cpp
//

#include "JSystem/JStudio/JStudio_JAudio/control.h"
#include "dolphin/types.h"

namespace JStudio_JAudio {

namespace {

// Fake inline.
// TODO: supposed to use JStudio::TObject::createFromAdaptor instead of this somehow
inline JStudio::TObject_sound* sound_creator(const JStudio::stb::data::TParse_TBlock_object& data, JStudio_JAudio::TAdaptor_sound* adaptor)
{
	JStudio::TObject_sound* object = new JStudio::TObject_sound(data, adaptor);

	if (!object) {
		return NULL;
	}
	if (object->mpAdaptor) {
		object->mpAdaptor->adaptor_do_prepare(object);
	}
	return object;
}

/* 80278B98-80278C4C       .text createObject_SOUND_JAI___Q214JStudio_JAudio21@unnamed@control_cpp@FRCQ47JStudio3stb4data20TParse_TBlock_objectP8JAIBasic */
JStudio::TObject* createObject_SOUND_JAI_(const JStudio::stb::data::TParse_TBlock_object& parseBlock, JAIBasic* sound) {
	TAdaptor_sound* adaptor = new TAdaptor_sound(sound);
	if (!adaptor) {
		return NULL;
	}

	return sound_creator(parseBlock, adaptor);
}

} // namespace

/* 80278C4C-80278CAC       .text __dt__Q214JStudio_JAudio13TCreateObjectFv */
TCreateObject::~TCreateObject() {}

/* 80278CAC-80278D20       .text create__Q214JStudio_JAudio13TCreateObjectFPPQ27JStudio7TObjectRCQ47JStudio3stb4data20TParse_TBlock_object */
bool TCreateObject::create(JStudio::TObject** object, const JStudio::stb::data::TParse_TBlock_object& data) {
	JStudioAudioCreateFunc createFunc;
	switch (data.get()->type) {
	case 'JSND':
		createFunc = createObject_SOUND_JAI_;
		break;
	default:
		return false;
	}

	*object = createFunc(data, mSound);
	return true;
}

} // namespace JStudio_JAudio