//
// Generated by dtk
// Translation Unit: d_com_inf_game.cpp
//

#include "d/d_com_inf_game.h"
#include "JSystem/JUtility/JUTAssert.h"
#include "MSL_C/string.h"
#include "SSystem/SComponent/c_phase.h"
#include "d/actor/d_a_player.h"
#include "d/d_com_lib_game.h"
#include "f_op/f_op_scene_mng.h"
#include "m_Do/m_Do_audio.h"

class J3DModel;

class dGrass_data_c {
public:
    ~dGrass_data_c();
    dGrass_data_c();
};

class dGrass_packet_c {
public:
    ~dGrass_packet_c();
    dGrass_packet_c();
    void draw();
    void calc();
    void update();
    void setData(dGrass_data_c*, int, cXyz*, int, u8);
    void newData(cXyz*, int, u8);
    void newAnm();
    void setAnm(int, s16);
};

class dFlower_data_c {
public:
    ~dFlower_data_c();
    dFlower_data_c();
};

class dFlower_packet_c {
public:
    ~dFlower_packet_c();
};

class dTree_data_c {
public:
    ~dTree_data_c();
    dTree_data_c();
};

class dTree_packet_c {
public:
    ~dTree_packet_c();
};

class dTree_anm_c {
public:
    ~dTree_anm_c();
};

class scene_class;

dComIfG_inf_c g_dComIfG_gameInfo;

/* 80052134-800521A4       .text ct__14dComIfG_play_cFv */
void dComIfG_play_c::ct() {
    field_0x4841 = 0;
    mParticle = NULL;
    mDemo = NULL;
    mpMagmaPacket = NULL;
    mpGrassPacket = NULL;
    mpTreePacket = NULL;
    mpWoodPacket = NULL;
    mpFlowerPacket = NULL;
    field_0x4A64[0] = 0xFF;
    field_0x4A64[1] = 0xFF;
    mLastSeaRoom = 0xFF;
    field_0x4A67[0] = 0xFF;
    mIkadaLinkPos.set(0.0f, 0.0f, 0.0f);
    mLkDArcIdx = -1;

    init();
}

/* 800521A4-800521D4       .text init__14dComIfG_play_cFv */
void dComIfG_play_c::init() {
    for (int i = 0; i < 1; i++) {
        mpPlayer[i] = NULL;
        mCurCamera[i] = -1;
    }

    for (int i = 0; i < 3; i++) {
        mpPlayerPtr[i] = NULL;
    }
}

/* 800521D4-80052400       .text itemInit__14dComIfG_play_cFv */
void dComIfG_play_c::itemInit() {
    /* Nonmatching */
}

/* 80052400-8005286C       .text getLayerNo__14dComIfG_play_cFi */
// almost
int dComIfG_play_c::getLayerNo(int i_roomNo) {
    int layer = dComIfGp_getStartStageLayer();

    if (layer < 0) {
        int hour = dKy_getdaytime_hour();
        if (dKy_checkEventNightStop()) {
            layer = 1;
        } else {
            layer = (hour >= 6 && hour < 18) == 0;
        }

        if (strcmp(dComIfGp_getStartStageName(), "sea") == 0) {
            if (i_roomNo == 44) {
                if (dComIfGs_isEventBit(0x520)) {
                    return layer | 4;
                } else if (dComIfGs_isEventBit(0xE20)) {
                    return layer | 2;
                } else if (dComIfGs_isEventBit(0x101)) {
                    return 9;
                }
            } else if (i_roomNo == 11) {
                if (dComIfGs_isEventBit(0x2D01)) {
                    return layer | 4;
                } else if (dKy_checkEventNightStop()) {
                    return layer | 2;
                }
            } else if (i_roomNo == 1) {
                return dComIfGs_isEventBit(0x1820) ? 3 : 1;
            }
        } else if (strcmp(dComIfGp_getStartStageName(), "A_mori") == 0) {
            if (dComIfGs_isEventBit(0xF80)) {
                return layer | 2;
            }
        } else if (strcmp(dComIfGp_getStartStageName(), "Asoko") == 0) {
            if (dComIfGs_isEventBit(0x520)) {
                return layer | 2;
            }
        } else if (strcmp(dComIfGp_getStartStageName(), "Hyrule") == 0) {
            if (dComIfGs_getTriforceNum() == 8) {
                return layer | 4;
            } else if (dComIfGs_isEventBit(0x3280)) {
                return layer | 2;
            }
        } else if (strcmp(dComIfGp_getStartStageName(), "Hyroom") == 0) {
            if (dComIfGs_getTriforceNum() == 8 && !dComIfGs_isEventBit(0x2C01)) {
                return layer | 4;
            } else if (dComIfGs_isEventBit(0x3280)) {
                return layer | 2;
            } else if (dComIfGs_isEventBit(0x3B40)) {
                return layer | 6;
            }
        } else if (strcmp(dComIfGp_getStartStageName(), "kenroom") == 0) {
            if (dComIfGs_isEventBit(0x2C01) ||
                (dComIfGs_isEventBit(0x3802) && !dComIfGs_isEventBit(0x3280)))
            {
                return layer | 6;
            } else if (dComIfGs_getTriforceNum() == 8) {
                return layer | 4;
            } else if (dComIfGs_isEventBit(0x3802)) {
                return layer | 2;
            }
        } else if (strcmp(dComIfGp_getStartStageName(), "M2tower") == 0) {
            if (dComIfGs_isEventBit(0x2D01)) {
                return layer | 2;
            }
        } else if (strcmp(dComIfGp_getStartStageName(), "GanonK") == 0) {
            if (!dComIfGs_isEventBit(0x3B02)) {
                return 8;
            }
        } else if (strcmp(dComIfGp_getStartStageName(), "GTower") == 0 &&
                   !dComIfGs_isEventBit(0x4002))
        {
            return 8;
        }
    }

    return layer;
}

/* 8005286C-800528F4       .text createParticle__14dComIfG_play_cFv */
void dComIfG_play_c::createParticle() {
    /* Nonmatching */
}

/* 800528F4-8005297C       .text createDemo__14dComIfG_play_cFv */
void dComIfG_play_c::createDemo() {
    /* Nonmatching */
}

/* 8005297C-800529B8       .text removeDemo__14dComIfG_play_cFv */
void dComIfG_play_c::removeDemo() {
    /* Nonmatching */
}

/* 800529B8-800529DC       .text executeEvtManager__14dComIfG_play_cFv */
void dComIfG_play_c::executeEvtManager() {
    mEventMgr.runProc();
}

/* 800529DC-80052A30       .text createMagma__14dComIfG_play_cFv */
void dComIfG_play_c::createMagma() {
    /* Nonmatching */
}

/* 80052A30-80052A84       .text removeMagma__14dComIfG_play_cFv */
void dComIfG_play_c::removeMagma() {
    /* Nonmatching */
}

/* 80052A84-80052AB0       .text executeMagma__14dComIfG_play_cFv */
void dComIfG_play_c::executeMagma() {
    /* Nonmatching */
}

/* 80052AB0-80052ADC       .text drawMagma__14dComIfG_play_cFv */
void dComIfG_play_c::drawMagma() {
    /* Nonmatching */
}

/* 80052ADC-80052B34       .text createGrass__14dComIfG_play_cFv */
void dComIfG_play_c::createGrass() {
    /* Nonmatching */
}

/* 80052B34-80052B88       .text removeGrass__14dComIfG_play_cFv */
void dComIfG_play_c::removeGrass() {
    /* Nonmatching */
}

/* 80052B88-80052C0C       .text __dt__15dGrass_packet_cFv */
dGrass_packet_c::~dGrass_packet_c() {
    /* Nonmatching */
}

/* 80052C0C-80052C48       .text __dt__13dGrass_data_cFv */
dGrass_data_c::~dGrass_data_c() {
    /* Nonmatching */
}

/* 80052C48-80052C74       .text executeGrass__14dComIfG_play_cFv */
void dComIfG_play_c::executeGrass() {
    /* Nonmatching */
}

/* 80052C74-80052CA0       .text drawGrass__14dComIfG_play_cFv */
void dComIfG_play_c::drawGrass() {
    /* Nonmatching */
}

/* 80052CA0-80052CF4       .text createFlower__14dComIfG_play_cFv */
void dComIfG_play_c::createFlower() {
    /* Nonmatching */
}

/* 80052CF4-80052D48       .text removeFlower__14dComIfG_play_cFv */
void dComIfG_play_c::removeFlower() {
    /* Nonmatching */
}

/* 80052D48-80052DCC       .text __dt__16dFlower_packet_cFv */
dFlower_packet_c::~dFlower_packet_c() {
    /* Nonmatching */
}

/* 80052DCC-80052E08       .text __dt__14dFlower_data_cFv */
dFlower_data_c::~dFlower_data_c() {
    /* Nonmatching */
}

/* 80052E08-80052E34       .text executeFlower__14dComIfG_play_cFv */
void dComIfG_play_c::executeFlower() {
    /* Nonmatching */
}

/* 80052E34-80052E60       .text drawFlower__14dComIfG_play_cFv */
void dComIfG_play_c::drawFlower() {
    /* Nonmatching */
}

/* 80052E60-80052EB4       .text createTree__14dComIfG_play_cFv */
void dComIfG_play_c::createTree() {
    /* Nonmatching */
}

/* 80052EB4-80052F08       .text removeTree__14dComIfG_play_cFv */
void dComIfG_play_c::removeTree() {
    /* Nonmatching */
}

/* 80052F08-80052FA4       .text __dt__14dTree_packet_cFv */
dTree_packet_c::~dTree_packet_c() {
    /* Nonmatching */
}

/* 80052FA4-80052FE0       .text __dt__12dTree_data_cFv */
dTree_data_c::~dTree_data_c() {
    /* Nonmatching */
}

/* 80052FE0-8005301C       .text __dt__11dTree_anm_cFv */
dTree_anm_c::~dTree_anm_c() {
    /* Nonmatching */
}

/* 8005301C-80053048       .text executeTree__14dComIfG_play_cFv */
void dComIfG_play_c::executeTree() {
    /* Nonmatching */
}

/* 80053048-80053074       .text drawTree__14dComIfG_play_cFv */
void dComIfG_play_c::drawTree() {
    /* Nonmatching */
}

/* 80053074-800530CC       .text createWood__14dComIfG_play_cFv */
void dComIfG_play_c::createWood() {
    /* Nonmatching */
}

/* 800530CC-80053120       .text removeWood__14dComIfG_play_cFv */
void dComIfG_play_c::removeWood() {
    /* Nonmatching */
}

/* 80053120-8005314C       .text executeWood__14dComIfG_play_cFv */
void dComIfG_play_c::executeWood() {
    /* Nonmatching */
}

/* 8005314C-80053178       .text drawWood__14dComIfG_play_cFv */
void dComIfG_play_c::drawWood() {
    /* Nonmatching */
}

/* 80053178-800531A8       .text ct__13dComIfG_inf_cFv */
void dComIfG_inf_c::ct() {
    field_0x1d1c1 = 0xFF;
    play.ct();
}

/* 800531A8-8005326C       .text dComIfG_changeOpeningScene__FP11scene_classs */
// matches with stringbase offset
int dComIfG_changeOpeningScene(scene_class* i_scene, s16 i_procName) {
    dComIfGp_offEnableNextStage();

    dComIfGp_setNextStage("sea_T", 0, 44, 0, 0.0f, 0, 1, 0);
    mDoAud_setSceneName(dComIfGp_getNextStageName(), dComIfGp_getNextStageRoomNo(),
                        dComIfGp_getNextStageLayer());
    dComIfGs_setRestartRoomParam(0);

    fopScnM_ChangeReq(i_scene, i_procName, 0, 30);
    fopScnM_ReRequest(i_procName, 0);
    return 1;
}

/* 8005326C-800532D8       .text dComIfG_resetToOpening__FP11scene_class */
void dComIfG_resetToOpening(scene_class*) {
    /* Nonmatching */
}

/* 800532D8-80053330       .text phase_1__FPc */
// matches with stringbase
int phase_1(char* i_arcName) {
    return !dComIfG_setObjectRes(i_arcName, (u8)0, NULL) ? cPhs_ERROR_e : cPhs_NEXT_e;
}

/* 80053330-80053388       .text phase_2__FPc */
int phase_2(char* i_arcName) {
    int syncStatus = dComIfG_syncObjectRes(i_arcName);

    if (syncStatus < 0) {
        return cPhs_ERROR_e;
    } else {
        return syncStatus > 0 ? 0 : 2;
    }
}

/* 80053388-80053390       .text phase_3__FPc */
int phase_3(char* i_arcName) {
    return cPhs_COMPLEATE_e;
}

/* 80053390-800533D0       .text dComIfG_resLoad__FP30request_of_phase_process_classPCc */
int dComIfG_resLoad(request_of_phase_process_class* i_phase, const char* i_arcName) {
    static int (*l_method[3])(void*) = {(int (*)(void*))phase_1, (int (*)(void*))phase_2,
                                        (int (*)(void*))phase_3};

    if (i_phase->id == cPhs_NEXT_e) {
        return cPhs_COMPLEATE_e;
    }

    return dComLbG_PhaseHandler(i_phase, l_method, (void*)i_arcName);
}

/* 800533D0-8005347C       .text dComIfG_resDelete__FP30request_of_phase_process_classPCc */
// matches with stringbase
int dComIfG_resDelete(request_of_phase_process_class* i_phase, const char* i_resName) {
    JUT_ASSERT(1048, i_phase->id != 1);

    if (i_phase->id == cPhs_NEXT_e) {
        dComIfG_deleteObjectResMain(i_resName);
        i_phase->id = cPhs_INIT_e;
    }

    return 0;
}

/* 8005347C-800534C4       .text dComIfGp_getReverb__Fi */
s8 dComIfGp_getReverb(int) {
    /* Nonmatching */
}

/* 800534C4-800535B8       .text dComIfGd_setSimpleShadow2__FP4cXyzffR13cBgS_PolyInfosfP9_GXTexObj
 */
void dComIfGd_setSimpleShadow2(cXyz*, f32, f32, cBgS_PolyInfo&, s16, f32, _GXTexObj*) {
    /* Nonmatching */
}

/* 800535B8-80053678       .text dComIfGp_getShip__Fii */
void dComIfGp_getShip(int, int) {
    /* Nonmatching */
}

/* 80053678-80053728       .text dComIfGp_getMapTrans__FiPfPfPs */
void dComIfGp_getMapTrans(int, f32*, f32*, s16*) {
    /* Nonmatching */
}

/* 80053728-80053778       .text dComIfGp_getRoomCamera__Fi */
void dComIfGp_getRoomCamera(int) {
    /* Nonmatching */
}

/* 80053778-800537C8       .text dComIfGp_getRoomArrow__Fi */
void dComIfGp_getRoomArrow(int) {
    /* Nonmatching */
}

/* 800537C8-8005388C       .text dComIfGp_setNextStage__FPCcsScScfUliSc */
void dComIfGp_setNextStage(const char* i_stageName, s16 i_point, s8 i_roomNo, s8 i_layer,
                           f32 i_lastSpeed, u32 i_lastMode, int i_setPoint, s8 i_wipe) {
    g_dComIfG_gameInfo.play.setNextStage(i_stageName, i_roomNo, i_point, i_layer, i_wipe);

    if (daPy_getPlayerLinkActorClass() != NULL) {
        u32 mode = daPy_getPlayerLinkActorClass()->field_0x2a0;

        if (mode & 1) {
            i_lastMode |= 0x8000;
        }

        i_lastMode |= daPy_getPlayerLinkActorClass()->field_0x354e << 0x10;

        if (mode & 0x8000) {
            i_lastMode |= 0x4000;
        }
    }

    g_dComIfG_gameInfo.info.getRestart().setLastSceneInfo(i_lastSpeed, i_lastMode);
    if (i_setPoint) {
        dComIfGs_setStartPoint(i_point);
    }
}

/* 8005388C-80053918       .text dComIfGs_onStageTbox__Fii */
void dComIfGs_onStageTbox(int, int) {
    /* Nonmatching */
}

/* 80053918-800539A8       .text dComIfGs_isStageTbox__Fii */
void dComIfGs_isStageTbox(int, int) {
    /* Nonmatching */
}

/* 800539A8-80053A2C       .text dComIfGs_isStageBossEnemy__Fi */
void dComIfGs_isStageBossEnemy(int) {
    /* Nonmatching */
}

/* 80053A2C-80053AAC       .text dComIfGs_onStageLife__Fi */
void dComIfGs_onStageLife(int) {
    /* Nonmatching */
}

/* 80053AAC-80053B30       .text dComIfGs_isStageLife__Fi */
void dComIfGs_isStageLife(int) {
    /* Nonmatching */
}

/* 80053B30-80053F70       .text dComIfGs_checkGetItem__FUc */
void dComIfGs_checkGetItem(u8) {
    /* Nonmatching */
}

/* 80053F70-80054578       .text dComIfGs_checkGetItemNum__FUc */
void dComIfGs_checkGetItemNum(u8) {
    /* Nonmatching */
}

/* 80054578-8005468C       .text
 * dComIfGd_setShadow__FUlScP8J3DModelP4cXyzffffR13cBgS_PolyInfoP12dKy_tevstr_csfP9_GXTexObj */
void dComIfGd_setShadow(u32, s8, J3DModel*, cXyz*, f32, f32, f32, f32, cBgS_PolyInfo&,
                        dKy_tevstr_c*, s16, f32, _GXTexObj*) {
    /* Nonmatching */
}

/* 8005468C-800547BC       .text getSceneList__Fi */
void getSceneList(int) {
    /* Nonmatching */
}

/* 800547BC-80054870       .text dComIfGd_getMeshSceneList__FR3Vec */
void dComIfGd_getMeshSceneList(Vec&) {
    /* Nonmatching */
}

/* 80054870-800548FC       .text dComIfGs_checkSeaLandingEvent__FSc */
void dComIfGs_checkSeaLandingEvent(s8) {
    /* Nonmatching */
}

/* 800548FC-80054C70       .text dComIfGs_setGameStartStage__Fv */
void dComIfGs_setGameStartStage() {
    /* Nonmatching */
}

/* 80054C70-80054CC0       .text dComIfGs_gameStart__Fv */
void dComIfGs_gameStart() {
    dComIfGp_offEnableNextStage();

    s8 roomNo = g_dComIfG_gameInfo.info.getPlayer().getPlayerReturnPlace().getRoomNo();
    s16 point = g_dComIfG_gameInfo.info.getPlayer().getPlayerReturnPlace().getPlayerStatus();
    char* name = g_dComIfG_gameInfo.info.getPlayer().getPlayerReturnPlace().getName();
    dComIfGp_setNextStage(name, point, roomNo, -1, 0.0f, 0, 1, 0);
}

/* 80054CC0-80054E9C       .text dComIfGs_copyPlayerRecollectionData__Fv */
void dComIfGs_copyPlayerRecollectionData() {
    /* Nonmatching */
}

/* 80054E9C-80055318       .text dComIfGs_setPlayerRecollectionData__Fv */
void dComIfGs_setPlayerRecollectionData() {
    /* Nonmatching */
}

/* 80055318-80055580       .text dComIfGs_revPlayerRecollectionData__Fv */
void dComIfGs_revPlayerRecollectionData() {
    /* Nonmatching */
}

/* 80055580-8005586C       .text dComIfGs_exchangePlayerRecollectionData__Fv */
void dComIfGs_exchangePlayerRecollectionData() {
    /* Nonmatching */
}

/* 8005586C-800559E8       .text dComIfGs_setSelectEquip__FiUc */
void dComIfGs_setSelectEquip(int, u8) {
    /* Nonmatching */
}
